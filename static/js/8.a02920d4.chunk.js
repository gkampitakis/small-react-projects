(this["webpackJsonpsmall-react-projects"]=this["webpackJsonpsmall-react-projects"]||[]).push([[8,16,64,65,82],{109:function(e,t,n){},127:function(e,t,n){"use strict";n.d(t,"a",(function(){return c.a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return f}));var c=n(16),r=n(0);function o(e){Object(r.useEffect)((function(){document.title=e}))}var a=n(15);function i(e){var t=Object(r.useState)(!0),n=Object(a.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(null),s=Object(a.a)(i,2),u=s[0],f=s[1],d=Object(r.useState)(void 0),l=Object(a.a)(d,2),j=l[0],b=l[1],O=Object(r.useCallback)((function(){o(!0),fetch(e).then((function(e){return e.json()})).then((function(e){return b(e)})).catch((function(e){return f(e)})).finally((function(){return o(!1)}))}),[e]);return Object(r.useEffect)((function(){O()}),[O]),[j,c,O,u]}function s(e,t){var n=localStorage.getItem(e);return n?JSON.parse(n):(t&&localStorage.setItem(e,JSON.stringify(t)),t)}function u(e,t){var n=Object(r.useState)(s(e,t)),c=Object(a.a)(n,2),o=c[0],i=c[1],u=Object(r.useCallback)((function(){i(s(e))}),[e]);return Object(r.useEffect)((function(){u()}),[u]),[o,function(t){try{var n=t instanceof Function?t(o):t;localStorage.setItem(e,JSON.stringify(n)),i(t)}catch(c){console.warn('Error setting localStorage key "'.concat(e,'": ').concat(c.message))}},u]}function f(e,t){Object(r.useEffect)((function(){var n=function(n){var c=e.current;c&&!c.contains((null===n||void 0===n?void 0:n.target)||null)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}},148:function(e,t,n){"use strict";var c=n(1),r=n(0),o=n.p+"static/media/error.5df9e372.svg";t.a=function(e){var t=e.error,n=e.message;Object(r.useEffect)((function(){t&&console.log(t)}),[t]);var a=n||(null===t||void 0===t?void 0:t.message);return Object(c.jsxs)("main",{className:"error_component",children:[Object(c.jsx)("img",{src:o,alt:"Error page image"}),Object(c.jsxs)("footer",{children:[a&&Object(c.jsx)("h2",{children:a}),t&&Object(c.jsx)("p",{children:"You can check console for more information"})]})]})}},210:function(e,t,n){"use strict";function c(e,t,n,c,r,o,a){try{var i=e[o](a),s=i.value}catch(u){return void n(u)}i.done?t(s):Promise.resolve(s).then(c,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,s,"next",e)}function s(e){c(a,r,o,i,s,"throw",e)}i(void 0)}))}}n.d(t,"a",(function(){return r}))},29:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var c=n(15),r=n(1),o=n(0);function a(e){var t=e.data,n=e.removeTour,a=Object(o.useState)(!1),i=Object(c.a)(a,2),s=i[0],u=i[1];return Object(r.jsxs)("article",{className:"single-tour",children:[Object(r.jsx)("img",{src:t.image,alt:t.name}),Object(r.jsxs)("footer",{children:[Object(r.jsxs)("div",{className:"tour-info",children:[Object(r.jsx)("h4",{children:t.name}),Object(r.jsx)("h4",{className:"tour-price",children:t.price})]}),Object(r.jsxs)("p",{children:[s?t.info:"".concat(t.info.substring(0,200),"..."),Object(r.jsx)("button",{onClick:function(){return u(!s)},children:s?"show less":"read more"})]}),Object(r.jsx)("button",{className:"delete-btn",onClick:n,children:"Not interested"})]})]})}},50:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return r}));var c=n(1);n(0);function r(){return Object(c.jsx)("h2",{className:"loading",children:"Loading ..."})}},68:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return f}));var c=n(15),r=n(1),o=n(0),a=n(127),i=n(50),s=n(148),u=n(29);n(109);function f(){Object(a.a)({background:"hsl(210, 36%, 96%)",color:"hsl(209, 61%, 16%)"}),Object(a.b)("Tours");var e=Object(a.c)("https://course-api.com/react-tours-project"),t=Object(c.a)(e,4),n=t[0],f=t[1],d=t[2],l=t[3],j=Object(o.useState)([]),b=Object(c.a)(j,2),O=b[0],m=b[1];return Object(o.useEffect)((function(){m(n)}),[n]),Object(r.jsxs)("main",{className:"tours",children:[Object(r.jsxs)("div",{className:"title",children:[Object(r.jsx)("h2",{children:"our tours"}),Object(r.jsx)("div",{className:"underline"})]}),f&&Object(r.jsx)(i.default,{})||l&&Object(r.jsx)(s.a,{message:l})||O&&Object(r.jsxs)(r.Fragment,{children:[O.map((function(e){return Object(r.jsx)(u.default,{removeTour:function(){return t=e.id,void m((function(e){return e.filter((function(e){return e.id!==t}))}));var t},data:e},e.id)})),0===O.length&&Object(r.jsx)("button",{className:"refetch-btn",onClick:d,children:"Refresh"})]})]})}},85:function(e,t,n){"use strict";n.r(t);var c=n(209),r=n.n(c),o=n(210),a=n(1),i=(n(0),n(135)),s=n.n(i),u=n(139),f=n(68),d=fetch;describe("Tours",(function(){afterEach(u.a),beforeEach(d.resetMocks),it("Should start with loading",(function(){d.disableMocks(),Object(u.c)(Object(a.jsx)(f.default,{}));var e=u.d.getByText(/Loading/i);expect(e).toBeTruthy()})),it("Should render error",(function(e){d.enableMocks(),d.mockRejectOnce((function(){return Promise.reject("Mock Error")})),Object(u.c)(Object(a.jsx)(f.default,{}));var t=u.d.getByText(/Loading/i);expect(t).toBeTruthy(),Object(u.e)((function(){var t=u.d.queryByText(/Mock Error/i);expect(t).toBeTruthy(),e()}))})),it("Should render tours list",Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.enableMocks(),d.mockResponseOnce(JSON.stringify([{id:"rec6d6T3q5EBIdCfD",name:"Best of Paris in 7 Days Tour",info:"mockInfo",image:"https://dl.airtable.com/.attachments/a0cd0702c443f31526267f38ea5314a1/2447eb7a/paris.jpg",price:"1,995"}])),Object(u.c)(Object(a.jsx)(f.default,{})),e.next=5,Object(u.f)(u.d.getByText(/Loading/i));case 5:t=u.d.getAllByText(/not interested/i),expect(t.length>0).toBeTruthy();case 7:case"end":return e.stop()}}),e)})))),it("Should remove tour from list",Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.enableMocks(),d.mockResponseOnce(JSON.stringify([{id:"rec6d6T3q5EBIdCfD",name:"Best of Paris in 7 Days Tour",info:"mockInfo",image:"https://dl.airtable.com/.attachments/a0cd0702c443f31526267f38ea5314a1/2447eb7a/paris.jpg",price:"1,995"}])),Object(u.c)(Object(a.jsx)(f.default,{})),e.next=5,Object(u.f)(u.d.getByText(/Loading/i));case 5:s.a.click(u.d.getByText(/not interested/i)),t=u.d.queryAllByText(/not interested/i),expect(t.length).toBe(0);case 8:case"end":return e.stop()}}),e)}))))}))}}]);